<mat-drawer-container autosize class="app-container">
  <!-- 1. The Sidebar Drawer -->
  <mat-drawer #sidenav id="sideNavigation" mode="over">
    <mat-toolbar color="primary">
      <span class="brandLogo">
        <!-- Corrected routerLink case -->
        <a routerLink="/home">
          <img alt="(BG)" class="d-inline-block align-middle" height="50" src="images/Ganio.jpg">
          BaiGanio
        </a>
      </span>
      <span>
        <!-- Use a button for accessibility, styled like a link -->
        <button mat-icon-button (click)="sidenav.toggle()">
          <i class="fas fa-times"></i>
        </button>
      </span>
    </mat-toolbar>

    <mat-nav-list (click)="sidenav.close()">
      <a mat-list-item routerLink="/home">Home</a>
      <hr>
      @if(isUserLogged()){
       <a mat-list-item routerLink="/dashboard">
          <i class="fas fa-chart-line"></i> Dashboard </a>
        <a mat-list-item routerLink="/profile">
          <i class="fas fa-user"></i> Profile</a>
        <hr>  <a mat-list-item routerLink="/dashboard">Dashboard</a>
        <mat-divider></mat-divider>
      }
      <a mat-list-item routerLink="/subscriptions"><i class="fas fa-subscript"></i>Subscriptions</a>
      <a mat-list-item routerLink="/courses"><i class="fas fa-book"></i>Courses</a>
      <a mat-list-item routerLink="/teachers"><i class="fas fa-graduation-cap"></i>Teachers</a>
      <a mat-list-item routerLink="/bloggers"><i class="fas fa-users"></i>Bloggers</a>
      <a mat-list-item routerLink="/articles"><i class="fas fa-book-reader"></i>Articles</a>
      <a mat-list-item routerLink="/videos"><i class="fas fa-video"></i>Videos</a>
   
      <hr>
      <a mat-list-item routerLink="/projects"><i class="fas fa-globe-americas"></i>Portfolio</a>
      <hr>
      <!-- <div *ngIf='isUserLogged()'>
        <a mat-list-item routerLink="/todos"><i class="fas fa-check"></i>ToDos</a>
        <hr>
        <a mat-list-item routerLink="/workbench"><i class="fas fa-cog"></i>Workbench</a>
        <hr>
      </div> -->
    </mat-nav-list>
  </mat-drawer>

  <!-- 2. The Main Content Wrapper (CRITICAL FIX) -->
  <mat-drawer-content id="main">
    <mat-toolbar color="primary">
      <span id="openNav">
        <button mat-icon-button (click)="sidenav.toggle()">
          <i class="fas fa-bars"></i>
        </button>
      </span>
      
      <span class="spacer"></span> <!-- Pushes items to the right -->

      <span class="actions">
        @if(isUserLogged()){
          <button mat-button [matMenuTriggerFor]="userMenu">
            Welcome, {{ storedUser?.firstName ? (storedUser?.firstName + ' ' + storedUser?.lastName) : storedUser?.email }}
          </button>
          
          <mat-menu #userMenu="matMenu">
            <button mat-menu-item routerLink="/profile">Profile</button>
            <mat-divider></mat-divider>
            <button mat-menu-item (click)="logOut()">
              <mat-icon>logout</mat-icon>
              <span>Logout</span>
            </button>
          </mat-menu>
        } @else {
          <a mat-button routerLink="/login">Login</a>
          <a mat-button routerLink="/register">Register</a>
        }
      </span>
    </mat-toolbar>

    <div class="container-fluid content-area">
      <router-outlet></router-outlet>
       <br>
      <app-footer></app-footer>
    </div>
  </mat-drawer-content>
</mat-drawer-container>
